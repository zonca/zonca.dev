<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.171">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2013-08-04">

<title>Andrea Zonca - Export google analytics data via API with Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Andrea Zonca</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../consult.html">
 <span class="menu-text">Consulting</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/zonca"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/andreazonca"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.online/@zonca"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Export google analytics data via API with Python</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">python</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 4, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>
Fun weekend hacking project: export google analytics data using the google APIs. <br> <br> Clone the latest version of the API client from: <br> <br> <a href="https://code.google.com/p/google-api-python-client"> https://code.google.com/p/google-api-python-client </a> <br> <br> there is an example for accessing analytics APIs in the samples/analytics folder, <br> but you need to fill in client_secrets.json. <br> <br> You can get the credentials from the APIs console: <br> <br> <a href="https://code.google.com/apis/console"> https://code.google.com/apis/console </a> <br> <br> In SERVICES: activate google analytics <br> In API Access: Create a “Client ID for installed applications” choosing “Other” as a platform <br> <br> Copy the client id and the client secret to client_secrets.json. <br> <br> <a name="more"> </a> <br> Now you only need the profile ID of the google analytics account, it is in the google analytics web interface, just choose the website, then click on Admin, then on the profile name in the profile tab, and then on profile settings. <br> <br> You can then run: <br> <br>
</p>
<blockquote class="tr_bq blockquote">
python core_reporting_v3_reference.py ga:PROFILEID
</blockquote>
The first time you run it, it will open a browser for authentication, but then the auth token is saved and used for future requests. <br> <br> This retrieves from the APIs the visits to the website from search, with keywords and the number of visits, for example for my blog: <br> <br>
<blockquote class="tr_bq blockquote">
Total Metrics For All Results: <br> This query returned 25 rows. <br> But the query matched 30 total results. <br> Here are the metric totals for the matched total results. <br> Metric Name &nbsp;= ga:visits <br> Metric Total = 174 <br> Rows: <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> (not provided) <span class="Apple-tab-span" style="white-space: pre;"> </span> 121 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> andrea zonca <span class="Apple-tab-span" style="white-space: pre;"> </span> 17 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> butterworth filter python <span class="Apple-tab-span" style="white-space: pre;"> </span> 4 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> andrea zonca blog <span class="Apple-tab-span" style="white-space: pre;"> </span> 2 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> healpix for ubuntu <span class="Apple-tab-span" style="white-space: pre;"> </span> 2 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> healpy install ubuntu <span class="Apple-tab-span" style="white-space: pre;"> </span> 2 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> python butterworth filter <span class="Apple-tab-span" style="white-space: pre;"> </span> 2 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> zonca andrea <span class="Apple-tab-span" style="white-space: pre;"> </span> 2 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> andrea zonca buchrain luzern <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> andrea zonca it <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> astrofisica in pillole <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> bin data healpy <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> ellipticity fwhm <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> enthought and healpy <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> fwhm <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> healpix apt-get <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> healpix repository ubuntu <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> healpix ubuntu 12.04 install <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> healpy ubuntu <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> install healpix ubuntu <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> ipython cluster task output <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> numpy pink noise <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> pink noise numpy <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> python 1/f noise <span class="Apple-tab-span" style="white-space: pre;"> </span> 1 <br> google <span class="Apple-tab-span" style="white-space: pre;"> </span> python apply mixin <span class="Apple-tab-span" style="white-space: pre;"> </span> 1
</blockquote>
<div>
<p><br></p>
</div>



</main> <!-- /main -->
<div>
    <hr>
</div>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>