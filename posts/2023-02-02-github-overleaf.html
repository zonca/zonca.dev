<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.171">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-02-02">

<title>Andrea Zonca - Work on Latex Document with Github and Overleaf</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Andrea Zonca</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../consult.html">
 <span class="menu-text">Consulting</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/zonca"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/andreazonca"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.online/@zonca"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Work on Latex Document with Github and Overleaf</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">git</div>
                <div class="quarto-category">github</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 2, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>In the past I have written about <a href="https://www.zonca.dev/posts/2021-01-28-github-overleaf-large-document">coordinating a large document using multiple overleaf documents and Github repositories</a>. In this post I will just layout the simpler case where we have a Latex document on Overleaf and we also want users to be able to work on it from Github and we want Github Actions to automatically build a PDF for every commit.</p>
<section id="create-less-privileged-user-on-github" class="level2">
<h2 class="anchored" data-anchor-id="create-less-privileged-user-on-github">Create less privileged user on Github</h2>
<p>A concern about using Overleaf is that to have the convenience of pushing and pulling from Github, it asks for write permissions to all repositories.</p>
<p>So just to play it safe, it is useful to create a new user on Github, for example mine is called <code>@zoncaoverleafbot</code>, which has write access only to this repository.</p>
<p>It is useful to be logged in with your official Github user in your browser and be logged in inside an Incognito window with your “Overleaf bot” user.</p>
</section>
<section id="create-repository-on-github" class="level2">
<h2 class="anchored" data-anchor-id="create-repository-on-github">Create repository on Github</h2>
<p>Let’s start with a Latex document on Overleaf, for example I used the <a href="https://www.overleaf.com/read/vtmsqrxpnhzn">“Astronomy &amp; Astrophysics” template</a> for testing.</p>
<p>Starting with a project on Overleaf is more complicated because of permission issues, so in case you have an Overleaf project, just download it locally.</p>
<p>Create a new repository on Github, this should be under your “real” Github account or any organization you have access to, upload the Latex document and all ancillary files.</p>
<p>See for example my repository <a href="https://github.com/zonca/overleaf_github" class="uri">https://github.com/zonca/overleaf_github</a>, you could also fork this repository under your account.</p>
<p>Finally, give “Write” access to your Overleaf bot user.</p>
</section>
<section id="create-the-linked-project-on-overleaf" class="level2">
<h2 class="anchored" data-anchor-id="create-the-linked-project-on-overleaf">Create the linked project on Overleaf</h2>
<p>Now login to Github with your “Overleaf bot” account, then login to Overleaf.</p>
<p>Click on “New project” =&gt; “Import from Github”, select your repository.</p>
<p>This will create a project on Overleaf that is automatically linked to the Github repository.</p>
</section>
<section id="how-to-edit-on-overleaf" class="level2">
<h2 class="anchored" data-anchor-id="how-to-edit-on-overleaf">How to edit on Overleaf</h2>
<p>Now both you and all your collaborators, can use Overleaf to edit the document and then push to Github using your “Overleaf bot” user, they do not need to link their own Github user.</p>
<ul>
<li>use the Overleaf “Write”</li>
<li><strong>Before making any edits</strong>, click on Menu =&gt; Github =&gt; Pull changes from Github</li>
<li>Make edits on Overleaf</li>
<li><strong>Once you are finished editing</strong>, even just for 1 or 2 hours, click on Menu =&gt; Github =&gt; Push changes to Github</li>
<li>Edits will show up on Github as made by the “Overleaf bot” user , which avoids giving too much permissions to Overleaf</li>
<li>Github is supposed to have the latest version of the document always</li>
</ul>
</section>
<section id="build-the-pdf-on-github-optional" class="level2">
<h2 class="anchored" data-anchor-id="build-the-pdf-on-github-optional">Build the PDF on Github (Optional)</h2>
<p>The easiest way to access the PDF is to get it from Overleaf. However, it might be useful to also have it available on Github. We can have Github actions build it and make it available as an artifact.</p>
<p>Customize the <a href="https://github.com/zonca/overleaf_github/blob/main/.github/workflows/build_latex.yml"><code>build_latex.yml</code></a> file to have Github actions build your PDF.</p>
<p>The only downside is that the PDF is hidden inside the Github actions, to simplify access we can get a direct link to the latest PDF using the <a href="https://nightly.link" class="uri">https://nightly.link</a> service, just paste the URL to the <code>build_latex.yml</code>, for my repository:</p>
<ul>
<li><code>https://github.com/zonca/overleaf_github/blob/main/.github/workflows/build_latex.yml</code></li>
</ul>
<p>This will provide a link of the form:</p>
<p><code>https://nightly.link/zonca/overleaf_github/workflows/build_latex/main/PDF.zip</code></p>
<p>which provides 1-click access to the latest PDF.</p>
<section id="create-releases-with-attached-pdf-on-github-optional" class="level3">
<h3 class="anchored" data-anchor-id="create-releases-with-attached-pdf-on-github-optional">Create releases with attached PDF on Github (Optional)</h3>
<p>The Github Actions workflow also handles tagging releases, so if you create a tagged version in the repository, like <code>0,1</code> in git, for example:</p>
<pre><code>git tag -a 0.1 -m "Tagging version 0.1"
git push --tags</code></pre>
<p>This is going to create a Release on Github, which is visible on the homepage and attach the PDF to it, see <a href="https://github.com/zonca/overleaf_github/releases/tag/0.1">the example on my repository</a>.</p>
<p>To make this work, you need to grant writing permissions Github Action workflows, in the repository “Settings” =&gt; “Actions” =&gt; “General”, select “Read and write permissions” under “Workflow permissions”.</p>


</section>
</section>

</main> <!-- /main -->
<div>
    <hr>
</div>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>